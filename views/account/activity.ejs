<h1><%= title %></h1>

<%- messages() %>

<% if (errors) { %>
  <ul class="notice">
  <% errors.array().forEach(error => { %>
    <li><%= error.msg %></li>
  <% }) %>
  </ul>
<% } %>

<p>Recent system activity (newest first).</p>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>User</th>
      <th>Role</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <% if (logs && logs.length) { %>
      <% logs.forEach(log => { %>
        <tr>
          <td><%= new Date(log.log_date).toLocaleString() %></td>
          <td>
            <% if (log.account_email) { %>
              <%= log.account_email %>
            <% } else { %>
              System
            <% } %>
          </td>
          <td><%= log.account_type || "-" %></td>
          <td><%= log.action %></td>
        </tr>
      <% }) %>
    <% } else { %>
      <tr><td colspan="4">No activity recorded yet.</td></tr>
    <% } %>
  </tbody>
</table>

<p><a href="/account/">Back to Account Management</a></p>
